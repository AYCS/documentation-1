---
title: Steps Configuration
layout: page
weight: 95
tags:
  - docker
  - jet
  - configuration
  - steps
categories:
  - docker
---

* include a table of contents
{:toc}

Steps are used for the `jet steps` command, which defines your continuous integration and delivery steps. By default, steps are expected to be in one of these 4 files:

* `jet-steps.yml`
* `jet-steps.json`
* `codeship-steps.yml`
* `codeship-steps.json`

_Jet_ will look for a steps file in this order. If you are running _Jet_ locally, you can override the filename with the `--steps-path` flag. Both YAML and JSON formats are accepted.

Steps are specified in a list, such as:

```yml
- name: foo_step
  tag: master
  service: app
  command: echo foo
- name: bar_step
  service: app
  command: echo bar
```

Steps are executed in the order they are specified. All steps share two directives:

* `name` specifies the name of the step, outputted in the logs. This must be unique for all steps. **This field is optional** and will be auto-generated if not specified.
* `tag` this says to only execute this step for the given "tag". Within Codeship this will be the branch or tag name. You can specify this locally via the `--tag` flag. This field is optional.

There are two main kinds of steps, group steps and run steps.

## Group Steps

There are three types of group steps:

* `parallel` run the sub-steps in parallel. Feel free to specify this recursively as much as you want, _Jet_ will just max out the number of available processors. If any sub-step fails, the parallel step fails as well.
* `serial` run the sub-steps serially. This is useful for grouping within parallel steps.

Group steps share the following four directives:

* `type` the step type, either `parallel` or `serial`.
* `steps` a list of sub-steps.
* `service` or `services` which specify a service or list of services for your steps to run on.

`service` is a single string, `services` is a list of strings. At most one of these can be specified. If you specify a service at the group level you cannot specify a service for an individual run step. If you specify a list of services, all sub-steps will be run in one of two ways.

* For parallel steps, the sub-steps will be run as if you specified a serial step containing the sub-steps for each service.
* For serial steps, the services will be run in parallel.

Since that's confusing, here's a logically equivalent example:

```yaml
# Example 1
- type parallel
  steps:
  - type: serial
    steps:
      - service: foo
        command: echo one
      - service: foo
        command: echo two
  - type: serial
    steps:
      - service: bar
        command: echo one
      - service: bar
        command: echo two

# the same as the above
- type parallel
  services:
  - foo
  - bar
  steps:
  - command: echo one
  - command: echo two

# Example 2
- service: foo
  command: echo one
- service: foo
  command: echo two
- service: bar
  command: echo one
- service: bar
  command: echo two

# the same as the above
- type serial
  services:
  - foo
  - bar
  steps:
  - command: echo one
  - command: echo two
```

## Run steps

Run steps specify a command to run on a service. You must specify one or two directives:

* `command` the command to run. This is always required, and identifies a step as a run step. Note that quotes are respected to split up arguments, but special characters such as `&&`, `|` or `>` are not.
* `service` the service to run the command on. If you already specified a service at the group level you can not specify a service again, otherwise this directive is required.
